# Операционные системы UNIX/Linux (Базовый)
## Part 1. Установка ОС

* Была установилена Ubuntu 20.04 Server LTS без графического интерфейса, и выполнена команда "cat /etc/issue" (рисунок 1.1).

<br>

![](screenshot/1.png)
<center>Рисунок 1.1 - Версия Ubuntu</center><br>

## Part 2. Создание пользователя

* Был создан новый пользователь user1 с помощью команды "sudo adduser vika" (рисунок 2.1). Далее пользователь был добавлен в группу adm с помощью команды "sudo adduser vika adm" (рисунок 2.2). Было проверено наличие нового пользователя с помощью команды "cat /etc/passwd" (рисунок 2.3).

<br>

![](screenshot/2.png)
<center>Рисунок 2.1 - Создание пользователя</center><br>

![](screenshot/2.1.png)
<center>Рисунок 2.2 - Добавление пользователя в группу adm</center><br>

![](screenshot/3.png)
<center>Рисунок 2.3 - Проверка наличия нового пользователя</center><br>

## Part 3. Настройка сети ОС
<br>

* Было задано название машины вида user-1 с помощью команды "hostname set-hostname user-1" (рисунок 3.1).

<br>

![](screenshot/4.png)
<center>Рисунок 3.1 - Название машины вида user-1</center><br>

* Была установилена временная зона по текущему местоположению с помощью команды "sudo dpkg-reconfigure tzdata". В результате даной команды появилось меню настроек (рисунок 3.2). В географигеском районе была выбрана "Европа", а в часовом поясе - "Москва" (рисунок 3.3). Был выведен результат (рисунок 3.4).

<br>

![](screenshot/5.png)
<center>Рисунок 3.2 - Выбор географигеского района</center><br>

![](screenshot/6.png)
<center>Рисунок 3.3 - Выбор часового пояса</center><br>

![](screenshot/7.png)
<center>Рисунок 3.4 - Результат</center><br>

* Были выведены названия сетевых интерфейсов с помощью команды "ifconfig -a" (рисунок 3.5).

<br>

![](screenshot/8.png)
<center>Рисунок 3.5 - Выбор географигеского района</center><br>

>"lo" - loopback - канал коммуникации с одной конечной точкой. Любые сообщения, посылаемые на этот канал, немедленно принимаются тем же самым каналом. Любые сообщения, которые отправляются с этого интерфейса, но у которых адрес не Loopback Interface, отбрасываются. Также саму технологию используют для тестирование передачи данных от обслуживающего центра коммутации, проверки сигнала на расстоянии, обеспечение работы коммутационных кабелей и их проверка, теста обратной петли, когда сигнал посылается и возвращается отправителю по всем коммуникационным каналам.

<br>

* Был получен ip адрес устройства от DHCP сервера с помощью команды "hostname -I" (рисунок 3.6).

<br>

![](screenshot/9.png)
<center>Рисунок 3.6 - IP адрес устройства</center><br>

> DHCP расшифровывается как Dynamic Host Configuration Protocol, позволяющий устройствам в сети автоматически получать IP-адреса и другие параметры при обращении к DHCP-серверу.

<br>

* Был определен внешний ip-адрес шлюза с помощью команды "wget -O - -q icanhazip.com" (рисунок 3.7) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию с помощью команды "ip route" (рисунок 3.8).

<br>

![](screenshot/11.png)
<center>Рисунок 3.7 - Внешний IP-адрес шлюза</center><br>

![](screenshot/10.png)
<center>Рисунок 3.8 - Внутренний IP-адрес шлюза</center><br>

* Были заданы статичные настройки ip, gw, dns в конфигурационном файле через редактор вим,  который был открыт с помощью команды "sudo vi /etc/netplan/00-installer-config.yaml" (рисунок 3.9).

<br>

![](screenshot/12.png)
<center>Рисунок 3.9 - Произведенные зменения в редакторе вим</center><br>

* Далее с помощью команды "sudo netplan apply" конфигурация была применяна к системе, и была произведена проверка изменений (рисунок 3.10). был пропингован хост 1.1.1.1 с помощью команды "ping -c 10 1.1.1.1" (рисунок 3.11) и ya.ru с помощью команды "ping -c 10 ya.ru" (рисунок 3.12).

<br>

![](screenshot/13.png)
<center>Рисунок 3.10 - Проверка изменений</center><br>

![](screenshot/14.png)
<center>Рисунок 3.11 - Пинг хоста 1.1.1.1</center><br>

![](screenshot/15.png)
<center>Рисунок 3.12 - Пинг хоста ya.ru</center><br>

## Part 4. Обновление ОС
<br>

* Были просмотрены системные пакеты, которые можно обновить до последней версии с помощью команды "sudo apt update" (рисунок 4.1), и далее они были обновлены с помощью команды "sudo apt full-upgrade" (рисунок 4.2). После обновления системных пакетов были введены те же команды обновления повторно для проверки (рисунок 4.3).

<br>

![](screenshot/16.png)
<center>Рисунок 4.1 - Количество пакетов для обновления</center><br>

![](screenshot/17.png)
<center>Рисунок 4.2 - Обновление пакетов</center><br>

![](screenshot/18.png)
<center>Рисунок 4.3 - Проверка обновления</center><br>

## Part 5. Использование команды sudo
<br>

* Было разрешено пользователю vika выполнять команду sudo с помощью команды "sudo usermod -a -G sudo vika", и был сменен пользователь с помощью команды "su - vika" (рисунок 5.1). Далее был изменен хост с помощью команды "sudo hostname set-hostname user-2" (рисунок 5.2).

<br>

![](screenshot/19.png)
<center>Рисунок 5.1 - Передача прав sudo</center><br>

![](screenshot/20.png)
<center>Рисунок 5.2 - Изменение хоста</center><br>

 > Команда sudo предоставляет возможность пользователям выполнять команды от имени суперпользователя root, либо других пользователей.

<br>

## Part 6. Установка и настройка службы времени
<br>

* Было выведено время часового пояса с помощью команды "timedatectl show" (рисунок 6.1).

<br>

![](screenshot/21.png)
<center>Рисунок 5.1 - Время часового пояса</center><br>

## Part 7. Установка и использование текстовых редакторов
<br>

* Был установлен текстовый редактор emacs с помощью команды "sudoapt install emacs". Редакторы vim и nano уже были установлены.

* Были созданы и открыты файлы в трех текстовых редакторах, в них был написан и сохранен текст:
    1. Vim (рисунок 7.1). C помощью команды :wq файл был закрыт с сохранением.
    2. Nano (рисунок 7.2). C помощью команды ctrl+s файл был сохранен, а с помощью ctrl+x закрыт.
    3. Emacs (рисунок 7.3). C помощью команд ctrl+x, ctrl+s, enter файл был сохранен, а с помощью ctrl+x, ctrl+c, enter закрыт.

<br>

![](screenshot/23.png)
<center>Рисунок 7.1 - Сохранение в vim</center><br>

![](screenshot/24.png)
<center>Рисунок 7.2 - Сохранение в nano</center><br>

![](screenshot/25.png)
<center>Рисунок 7.2 - Сохранение в emacs</center><br>

* Были повторно открыты файлы в трех текстовых редакторах, в них был изменен и несохранен новый текст:
    1. Vim (рисунок 7.4). C помощью команды :q! файл был закрыт без сохранения.
    2. Nano (рисунок 7.5). C помощью команды ctrl+x, а потом подтверждения N файл был закрыт.
    3. Emacs (рисунок 7.6). C помощью команд ctrl+x, ctrl+c, enter, а потом подтверждения no файл был закрыт.

<br>

![](screenshot/26.png)
<center>Рисунок 7.4 - Изменения в vim</center><br>

![](screenshot/27.png)
<center>Рисунок 7.5 - Изменения в nano</center><br>

![](screenshot/28.png)
<center>Рисунок 7.6 - Изменения в emacs</center><br>

* Были повторно открыты файлы в трех текстовых редакторах, в них был произведен поиск и замена:
    1. Vim. C помощью команды "/*текст*" был произведен поиск (рисунок 7.7). C помощью команды ":%s/*что заменить*/*на что заменить*/g" была произведена замена (рисунок 7.8). 
    2. Nano. C помощью команды ctrl+q был произведен поиск (рисунок 7.9). C помощью команды ctrl+\ была произведена замена (рисунок 7.10).
    3. Emacs. C помощью команды ctrl+s был произведен поиск (рисунок 7.11). C помощью команды shift+option+5 была произведена замена (рисунок 7.12).

<br>

![](screenshot/29.png)
<center>Рисунок 7.7 - Поиск в vim</center><br>

![](screenshot/30.png)
<center>Рисунок 7.8 - Замена в vim</center><br>

![](screenshot/31.png)
<center>Рисунок 7.9 - Поиск в nano</center><br>

![](screenshot/32.png)
<center>Рисунок 7.10 - Замена в nano</center><br>

![](screenshot/33.png)
<center>Рисунок 7.11 - Поиск в emacs</center><br>

![](screenshot/34.png)
<center>Рисунок 7.12 - Замена в emacs</center><br>

## Part 8. Установка и базовая настройка сервиса SSHD
<br>

* Была установлена служба SSHd c помощью команды "sudo apt install openssh-server".

* Был добавлен автостарт службы при загрузке системы c помощью команды "sudo systemctl enable ssh".

* Через конфигурационный файл был изменен порт SSHd на 2022. Файл был открыт c помощью команды "sudo vim /etc/ssh/sshd_config" (рисунок 8.1). Далее были активированы изменения с помощью команды "/etc/init.d/ssh restart" и выведена команда "netstat -tan" (рисунок 8.2).

<br>

![](screenshot/35.png)
<center>Рисунок 8.1 - Файл sshd_config</center><br>

![](screenshot/36.png)
<center>Рисунок 8.2 - Проверка</center><br>

> Флаг "t" нужен для отображения tcp-портов. 
Флаг "n" служит для вывода IP-адресов вместо имен хостов.
Флаг "a" позволяет посмотреть состояние всех сокетов.

<br>

* Для показа наличия процесса sshd была использована команда "ps aux | grep sshd" (рисунок 8.3).

<br>

![](screenshot/37.png)
<center>Рисунок 8.3 - Процесс sshd</center><br>

> Флаг "a" - выводит на дисплей процессы всех пользователей, за исключением тех процессов, которые не связаны с терминалом и процессами группы лидеров.
Флаг "u" - выводит на дисплей подставки для ориентированных на пользователя формате, который обеспечивает подробную информацию о процессах.
Флаг "x" - перечисляет процессы без управляющего терминала. В основном это процессы, которые запускаются во время загрузки и работают в фоновом режиме.

<br>

## Part 9. Установка и использование утилит top, htop
<br>

* Была запущена утилита top (рисунок 9.1). В ней было найдено:
    * uptime - 26 min
    * количество авторизованных пользователей - 1
    * общая загрузка системы - 0.00, 0.00, 0.00
    * общее количество процессов - 95
    * загрузка cpu - 3 строчка
    * загрузку памяти - 4 и 5 строчка
    * pid процесса занимающего больше всего памяти с помощью нажатия Shift+M - 651 (рисунок 9.2)
    * pid процесса, занимающего больше всего процессорного времени с помощью нажатия Shift+T - 1794 (рисунок 9.3)

<br>

![](screenshot/38.png)
<center>Рисунок 9.1 - Утилита top</center><br>

![](screenshot/39.png)
<center>Рисунок 9.2 - Pid процесса занимающего больше всего памяти</center><br>

![](screenshot/40.png)
<center>Рисунок 9.3 - Pid процесса, занимающего больше всего процессорного времени</center><br>

* Была запущена утилита htop. В ней было сделано:
    * сортировка с помощью нажатия F6 и выбора позиции (рисунок 9.4):
        * PID (рисунок 9.5)
        * PERCENT_CPU (рисунок 9.6)
        * PERCENT_MEM (рисунок 9.7)
        * TIME (рисунок 9.8)
    * фильтрация для процесса sshd с помощью нажатия F4 (рисунок 9.9)
    * поиск процесса syslog с помощью нажатия F3 (рисунок 9.10)
    * добавлены hostname, clock с помощью нажатия F2 (рисунок 9.11)

<br>

![](screenshot/41.png)
<center>Рисунок 9.4 - Выбор сортировки (слева)</center><br>

![](screenshot/42.png)
<center>Рисунок 9.5 - Сортировка по PID</center><br>

![](screenshot/43.png)
<center>Рисунок 9.6 - Сортировка по PERCENT_CPU</center><br>

![](screenshot/44.png)
<center>Рисунок 9.7 - Сортировка по PERCENT_MEM</center><br>

![](screenshot/45.png)
<center>Рисунок 9.8 - Сортировка по TIME</center><br>

![](screenshot/46.png)
<center>Рисунок 9.9 - Фильтрация для процесса sshd</center><br>

![](screenshot/47.png)
<center>Рисунок 9.10 - Поиск процесса syslog</center><br>

![](screenshot/48.png)
<center>Рисунок 9.11 - Добавление hostname, clock</center><br>

## Part 10. Использование утилиты fdisk
<br>

* Была запущена команда "fdisk -l" (рисунок 10.1). Было найдено:
    * название жесткого диска - /dev/sda
    * размер жесткого диска - 10 ГБ
    * количество секторов жесткого диска - 20971520
    * размер swap - 1,7 ГБ с помощью команды "free -h" (рисунок 10.2)

<br>

![](screenshot/49.png)
<center>Рисунок 10.1 - Параметры жесткого диска</center><br>

![](screenshot/50.png)
<center>Рисунок 10.2 - Параметры swap</center><br>

## Part 11. Использование утилиты df
<br>

* Была запущена команда "df" (рисунок 11.1). Единица измерения в выводе - КБ. Было найдено для корневого раздела (/):
    * размер раздела - 9299276 КБ
    * размер занятого пространства - 4774968 КБ
    * размер свободного пространства - 4030332 КБ
    * процент использования - 55%

<br>

![](screenshot/51.png)
<center>Рисунок 10.1 - Параметры жесткого диска</center><br>

<br>

* Была запущена команда "df -Тh", флаг "h" для более читаемого формата, а "Т" для отображения типа файловой системы  (рисунок 11.2). Было найдено для корневого раздела (/):
    * размер раздела - 8,9 ГБ
    * размер занятого пространства - 4,6 ГБ
    * размер свободного пространства - 3,9 ГБ
    * процент использования - 55%
    * тип файловой системы - ext4

<br>

![](screenshot/52.png)
<center>Рисунок 10.1 - Параметры жесткого диска</center><br>

## Part 12. Использование утилиты du
<br>

* Была запущена команда "du" (рисунок 12.1).

<br>

![](screenshot/53.png)
<center>Рисунок 12.1 - Команда "du"</center><br>

* Был выведен размер папок /home, /var, /var/log в человекочитаемом виде с помощью команды "sudo du -sh /*название папки*", флаг "h" для более читаемого формата, а "s" для вывода общего размера (рисунок 12.2).

<br>

![](screenshot/54.png)
<center>Рисунок 12.2 - Размер папок /home, /var, /var/log</center><br>

* Был выведен размер всего содержимого в /var/log каждого вложенного элемента с помощью команды "sudo du -h /var/log/*" (рисунок 12.3).

<br>

![](screenshot/55.png)
<center>Рисунок 12.3 - Размер всего содержимого в /var/log</center><br>

## Part 13. Установка и использование утилиты ncdu
<br>

* Была установлена утилита ncdu с помощью команды "sudo apt install ncdu" (рисунок 13.1).

<br>

![](screenshot/56.png)
<center>Рисунок 13.1 - Установка утилиты ncdu</center><br>

* Был найден размер папок с помощью ncdu через корневую папку "/":
    * /home - 116,0 КБ (рисунок 13.2)
    * /var - 785,6 МБ (рисунок 13.2)
    * /var/log - 75,3 МБ (рисунок 13.3)

<br>

![](screenshot/57.png)
<center>Рисунок 13.2 - Размер папок /home, /var</center><br>

![](screenshot/58.png)
<center>Рисунок 13.3 - Размер папки /var/log</center><br>

## Part 14. Работа с системными журналами
<br>

* Были открыты для просмотра журналы с помощью команды "less /var/log/*название журнала*":
    * /var/log/dmesg (рисунок 14.1)
    * /var/log/syslog (рисунок 14.2)
    * /var/log/auth.log (рисунок 14.3)
        * время последней успешной авторизации - Aug 14 13:09:57
        * имя пользователя - shondraf
        * метод входа в систему - sudo
        * была перезапущена служба SSHd с помощью команды "sudo systemctl restart sshd", а потом открыт журнал auth.log через команду "grep -a sshd /var/log/auth.log" (рисунок 14.4)

<br>

![](screenshot/59.png)
<center>Рисунок 14.1 - Просмотр журнала dmesg</center><br>

![](screenshot/60.png)
<center>Рисунок 14.2 - Просмотр журнала syslog</center><br>

![](screenshot/61.png)
<center>Рисунок 14.3 - Просмотр журнала auth.log</center><br>

![](screenshot/62.png)
<center>Рисунок 14.4 - Просмотр перезапуска SSHd в auth.log </center><br>

## Part 15. Использование планировщика заданий CRON
<br>

* Был запущен планировщик заданий CRON с помощью команды "crontab -e", далее была записана команда uptime через каждые 2 минуты (рисунок 15.1). Проверка журнала syslog на команду uptime через команду "grep uptime /var/log/syslog" (рисунок 15.2).

<br>

![](screenshot/63.png)
<center>Рисунок 15.1 - Планировщик заданий CRON</center><br>

![](screenshot/64.png)
<center>Рисунок 15.2 - Проверка журнала syslog</center><br>

* Были удалены все задания из планировщика заданий с помощью команды "crontab -r" (рисунок 15.3).

<br>

![](screenshot/65.png)
<center>Рисунок 15.3 - Список текущих заданий для CRON</center><br>